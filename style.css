:root {
  --sidebar-bg: #fff3b0;
  --sidebar-hover: #FFEA75;
  --content-bg: #e5e7eb;
}

body {
  background: #f6f7fb;
  /* üëà importante: que el body permita scroll general solo del contenido principal */
  min-height: 100vh;
  overflow-x: hidden;
}

/* ===== Layout general ===== */
.layout {
  min-height: 100vh;
  display: block; /* Bootstrap ya maneja el grid con .row, no lo rompemos */
  position: relative;
}

/* üëá aseguramos que la fila que contiene sidebar + main ocupe toda la altura */
.layout > .row {
  min-height: 100vh; /* üëà cambio */
  flex-wrap: nowrap; /* üëà evita que sidebar y main salten de fila en desktop */
}

/* En pantallas muy chicas s√≠ permitimos wrap normal para que sidebar pueda ocupar toda la pantalla arriba */
@media (max-width: 576px) {
  .layout > .row {
    flex-wrap: wrap; /* üëà mobile fallback */
  }
}

/* ===== Sidebar ===== */
.sidebar {
  background: var(--sidebar-bg);
  color: #9b9da0;
  min-height: 100vh;
  position: sticky;
  top: 0;
  padding: 1rem;
  border-right: 1px solid #d1d5db; /* üëà borde para separar visualmente */
  box-sizing: border-box;

  display: flex;            /* üëà para manejar el scroll interno bonito */
  flex-direction: column;
  max-height: 100vh;        /* üëà asegura altura pantalla */
  overflow-y: auto;         /* üëà si hay muchos links, hace scroll s√≥lo dentro de la barra */
  overflow-x: hidden;
  scrollbar-gutter: stable; /* üëà evita salto cuando aparece scroll */
}

/* Links y botones */
.sidebar .nav-link,
.sidebar .btn-toggle {
  color: #2b2b2b; /* m√°s contraste que #9b9da0 para accesibilidad */
  border-radius: 0.6rem;
  padding: 0.6rem 0.75rem;
  font-weight: 500;
  display: block;
  text-decoration: none;
  transition: background 0.2s;
  width: 100%;
  text-align: left;
  background: transparent;
  border: 0;
}

/* Hover */
.sidebar .nav-link:hover,
.sidebar .btn-toggle:hover {
  background: var(--sidebar-hover);
  color: #000;
}

/* Botones de colapso */
.btn-toggle {
  cursor: pointer;
  position: relative;
}

/* Flechita */
.btn-toggle::after {
  content: '‚ñ∏';
  float: right;
  transition: transform 0.2s ease;
  opacity: 0.8;
}
.btn-toggle[aria-expanded="true"]::after {
  transform: rotate(90deg);
}

/* Submen√∫ */
.submenu .nav-link {
  padding-left: 2rem;
  font-size: 0.95rem;
}

/* ===== Panel derecho ===== */
.content-wrap {
  padding: 1.25rem;
  background: transparent;
  min-height: 100vh;
  overflow-x: hidden;
  /* üëá este es el que realmente va a scrollear en desktop */
  overflow-y: auto; /* üëà cambio clave */
  max-height: 100vh; /* pantalla completa */
  box-sizing: border-box;
}

/* Contenido interno (tarjeta gris) */
.content {
  background: var(--content-bg);
  border: 1px solid #d1d5db;
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  padding: 1.25rem;
  min-height: calc(100vh - 2.5rem); /* para que visualmente llene, pero deje margen interior */
}

/* ===== Sidebar colapsable (todas las versiones) ===== */

/* Transiciones suaves */
.sidebar,
.content-wrap {
  transition: all .25s ease;
}

/* Estado colapsado */
.layout.collapsed .sidebar {
  flex: 0 0 0 !important;
  max-width: 0 !important;
  padding: 0 !important;
  overflow: hidden;
  border: 0;
}

/* Cuando colapsa, el main ocupa todo el ancho */
.layout.collapsed .content-wrap {
  flex: 0 0 100% !important;
  max-width: 100% !important;
}

/* üëá Bootstrap usa columnas con max-width y flex-basis;
   Forzamos que las columnas respondan al colapso:
*/
.layout.collapsed .sidebar[class*="col-"] {
  flex: 0 0 0 !important;
  max-width: 0 !important;
}
.layout.collapsed .content-wrap[class*="col-"] {
  flex: 1 1 auto !important;
  max-width: 100% !important;
}

/* ===== Bot√≥n flotante para colapsar/expandir ===== */
.sidebar-toggle{
  position: fixed;         /* siempre visible */
  left: .5rem;
  top: .75rem;
  z-index: 1100;
  background: var(--sidebar-bg);
  color: #2b2b2b;
  border: 1px solid #d1d5db;
  border-radius: .75rem;
  width: 36px;
  height: 36px;
  line-height: 34px;
  text-align: center;
  font-weight: 700;
  box-shadow: 0 4px 14px rgba(0,0,0,.12);
  cursor: pointer;
  transition: transform .15s ease, background .2s ease, color .2s ease;
}

/* Hover/active */
.sidebar-toggle:hover{
  transform: translateY(-1px);
  background: var(--sidebar-hover);
}
.sidebar-toggle:active{
  transform: translateY(0);
}

/* Opcional: mover un poquito el bot√≥n cuando est√° colapsado
.layout.collapsed .sidebar-toggle{
  left: .5rem;
}
*/

/* Evita que el bot√≥n tape el contenido en pantallas muy chicas */
@media (max-width: 420px){
  .sidebar-toggle{
    left: .4rem;
    top: .6rem;
    width: 34px;
    height: 34px;
    line-height: 32px;
  }

  /* En m√≥vil no queremos forzar sticky 100vh porque el sidebar suele ocupar toda la pantalla primero */
  .sidebar {
    position: relative;         /* üëà cambio en m√≥vil */
    max-height: none;
    min-height: auto;
    overflow-y: visible;
    border-right: 1px solid #d1d5db;
  }

  .content-wrap {
    max-height: none;
    overflow-y: visible;
    min-height: auto;
  }

  .layout > .row {
    flex-wrap: wrap;            /* asegurado tambi√©n aqu√≠ */
  }
}

/* ===== Ajustes tabla de instrumentos din√°mica ===== */
.inst-row .qty-col {
  flex:0 0 auto;
  width:90px;
}
.inst-row .trash-col {
  flex:0 0 auto;
  width:55px; /* bot√≥n a la derecha */
}
.inst-row .inst-cantidad {
  text-align:center;
}
